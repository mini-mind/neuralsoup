# DYNN - 具身智能体仿真

基于PixiJS + React的浮游生物智能体仿真系统，实现了脉冲神经网络(SNN)驱动的具身智能体在2D环境中的学习与适应行为。

## ✨ 特性

- 🧠 **脉冲神经网络**: 基于皮质柱的多层SNN架构（108→128→64→32→3）
- 🤖 **混合控制系统**: 主智能体SNN控制 + 多键组合键盘控制，其他智能体随机游走
- 👁️ **120度视野系统**: 前方36个格子感受器，每格子RGB颜色输入
- 🔍 **智能视觉检测**: 基于最近元素检测算法，支持邻域模糊效果
- 📹 **镜头跟随**: 摄像机自动跟随主控智能体运动
- 🌍 **无限循环世界**: 智能体可从边界一侧穿越到另一侧
- 😊 **情绪系统**: 愉悦度和唤醒度的实时调节机制
- 🎮 **实时可视化**: 基于PixiJS的高性能渲染，全屏画布
- 📊 **集成控制台**: 仿真控制、统计信息和帮助说明一体化界面

## 🎮 控制说明

### 键盘控制（主智能体）
- **W / ↑**: 前进
- **A / ←**: 左转
- **D / →**: 右转
- **多键组合**: 支持任意键同时按下（如W+A边前进边左转）
- **A+D抵消**: 同时按下A和D键时转向会抵消

### 界面控制
- **右侧面板**: 点击箭头展开/收起控制台面板
- **符号按钮**: ▶开始/继续, ⏸暂停, ⏹重置
- **帮助按钮**: 点击?按钮查看详细控制说明和视觉系统介绍

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```

### 构建生产版本
```bash
npm run build
```

## 🏗️ 项目结构

```
src/
├── components/          # React组件
│   ├── SimulationCanvas.tsx  # PixiJS仿真画布
│   ├── ControlPanel.tsx      # 控制面板
│   └── StatsPanel.tsx        # 统计面板
├── engine/             # 仿真引擎
│   ├── SimulationEngine.ts   # 主仿真引擎
│   ├── CorticalColumn.ts     # 皮质柱神经网络
│   └── WorldRenderer.ts      # 世界渲染器
├── types/              # TypeScript类型定义
│   └── simulation.ts         # 仿真相关类型
└── App.tsx             # 主应用组件
```

## 🎯 核心概念

### 智能体设计
- **主控智能体（蓝色）**: SNN神经网络控制 + 键盘输入
- **其他智能体（蓝色）**: 随机游走算法
- **视觉系统**: 前方120度视野，36个感受格子
- **感知输入**: 每格子RGB颜色值，共108维输入向量
- **行动输出**: 左转、右转、前进三种基本动作
- **情绪系统**: 愉悦度（食物奖励）和唤醒度（碰撞刺激）

### 环境元素
- 🟢 **食物**: 绿色圆形，提供正奖励，增加愉悦度
- ⚫ **移动障碍物**: 黑色圆形，随机移动
- ⚪ **静止障碍物**: 深灰色圆形，固定位置
- 🔵 **循环边界**: 智能体可从一侧穿越到另一侧

### 学习机制
- 基于奖励的突触可塑性
- 情绪系统调节神经网络阈值和突触强度
- 实时适应环境变化

### 视觉系统
- **视野范围**: 前方120度扇形区域
- **感受器数量**: 36个均匀分布的弯曲格子
- **检测算法**: 基于最近元素检测，每格子显示该方向最近物体颜色
- **模糊效果**: 邻域加权平均（自身0.6，邻域各0.2）
- **颜色编码**: 
  - 绿色：食物
  - 黑色：障碍物
  - 蓝色：其他智能体
  - 天空蓝：背景

## 🎮 使用说明

1. **开始仿真**: 点击"开始"按钮启动仿真
2. **键盘控制**: 使用WASD或方向键控制主智能体
3. **镜头跟随**: 摄像机自动跟随主智能体移动
4. **暂停/继续**: 随时暂停或继续仿真
5. **重置**: 重置智能体状态和环境
6. **观察**: 查看右侧统计面板了解仿真状态

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **图形引擎**: PixiJS 7.4
- **构建工具**: Vite 5.0
- **神经网络**: 自实现的脉冲神经网络

## 📈 性能优化

- 高效的PixiJS渲染管线
- 对象池管理减少GC压力
- 基于requestAnimationFrame的游戏循环
- 响应式UI设计，支持全屏显示
- 镜头跟随算法优化

## 🔬 算法特色

- **皮质柱架构**: 模拟大脑皮质柱的多层神经网络结构
- **脉冲神经网络**: 基于生物真实的脉冲发放机制
- **情绪调节**: 愉悦度和唤醒度影响神经网络参数
- **智能视觉感知**: 基于最近元素检测的120度视野系统
- **视觉模糊处理**: 邻域加权平均提供平滑的视觉过渡
- **混合控制**: SNN自主决策与多键组合键盘控制的结合
